<html>
        
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.13/semantic.min.css">
            <script src="https://code.jquery.com/jquery-1.10.1.min.js"></script>
            <script src="https://js.tappaysdk.com/tpdirect/v2_3_3"></script>
        
            <title>Android Pay Example</title>
            <style>
                .ui.meesage {
                    transition: all .5s ease
                }
            </style>
        </head>
        
        <body>
            <div class="ui grid centered stackable">
                <div class="ten wide column">
                    <br>
                    <br>
                    <form class="ui form">
                        <img src="./btn.png" alt="" class="ui centered medium image" id="pay" style="cursor: pointer">
                    </form>
                    <div class="ui info message hidden result1">
                        <div class="ui header">Get Prime Result</div>
                        <pre class="content" id="result1" style="overflow-x: auto"></pre>
                        <pre id="curl" style="overflow-x: auto"></pre>
                    </div>
                </div>
            </div>
            <script>
                // APP ID å’Œ APP Key è«‹åˆ° Portal çš„ æ‡‰ç”¨ç¨‹å¼é é¢ä¸Šé¢ç”³è«‹, ä¸¦ä¸”å¡«å…¥
                // SERVER_TYPE ç‚º 'sandbox' or 'production'
                TPDirect.setupSDK(APP_ID, "APP_KEY", "SERVER_TYPE")
        
                document.addEventListener('DOMContentLoaded', () => {
        
                    if (TPDirect.paymentRequestApi.checkAvailability()) {
        
                        // åˆå§‹åŒ– Android Pay ç’°å¢ƒ
                        // Public Key å’Œ Merchant ID è«‹åˆ° Portal çš„ Android Pay é é¢ä¸Šé¢ç”³è«‹, ä¸¦ä¸”å¡«å…¥
                        var ANDROID_PAY_PUBLICKEY = "Public_Key_From_Portal_In_the_Android_Pay_Page";
                        var ANDROID_PAY_MERCHANT_ID = "Merchant_ID_From_Portal_In_the_Android_Pay_Page";
                        TPDirect.paymentRequestApi.setupAndroidPay(ANDROID_PAY_PUBLICKEY, ANDROID_PAY_MERCHANT_ID)
        
                        document.getElementById('pay').style.display = 'inline-block';
        
                        var data = {
                            // æ”¯æ´çš„å¡åˆ¥, è«‹å‹™å¿…ä½¿ç”¨å¤§å¯«
                            supportedNetworks: ['AMEX', 'MASTERCARD', 'VISA'],
                            // æ”¯æ´çš„ä»˜æ¬¾æ–¹å¼, basic-card ç‚ºä¸€èˆ¬å¡åˆ¥ä»˜æ¬¾, https://android.com/pay ç‚º Android Pay ä»˜æ¬¾
                            supportedMethods: ['basic-card', 'https://android.com/pay'],
        
                            displayItems: [{
                                label: 'TapPay - iPhone8',
                                amount: {
                                    currency: 'TWD',
                                    value: '1.00'
                                }
                            }],
                            total: {
                                label: 'ä»˜çµ¦ TapPay',
                                amount: {
                                    currency: 'TWD',
                                    value: '1.00'
                                }
                            },
                            shippingOptions: [{
                                    id: "standard",
                                    label: "ğŸš› Ground Shipping (2 days)",
                                    amount: {
                                        currency: "TWD",
                                        value: "5.00"
                                    }
                                },
                                {
                                    id: "drone",
                                    label: "ğŸš€ Drone Express (2 hours)",
                                    amount: {
                                        currency: "TWD",
                                        value: "25.00"
                                    }
                                }
                            ],
                            // optional
                            // è¨­æˆ ture çš„è©±, Payment Request æœƒè¦æ±‚ä½¿ç”¨è€…å¡«å¯«è³‡æ–™
                            options: {
                                // ä»˜æ¬¾äººçš„ä¿¡ç®±
                                requestPayerEmail: false,
                                // ä»˜æ¬¾äººçš„å§“å
                                requestPayerName: false,
                                // ä»˜æ¬¾äººçš„é›»è©±
                                requestPayerPhone: false,
                                // ä»˜æ¬¾äººçš„é‹é€åœ°å€
                                requestShipping: false,
                            }
                        }
        
                        TPDirect.paymentRequestApi.setupPaymentRequest(data)
        
                        var button = document.querySelector('#pay');
                        button.addEventListener('click', function (event) {
                            TPDirect.paymentRequestApi.getPrime(handlePayByPrime)
                        })
                    }
        
                });
        
                function handlePayByPrime(result) {
                    alert(JSON.stringify(result, null, 4))
                    document.querySelector('#result1').innerHTML = JSON.stringify(result, null, 4)
                    document.querySelector('.result1').classList.remove('hidden')
var command = `Use following command to send to server \n\n
curl -X POST https://sandbox.tappaysdk.com/tpc/payment/pay-by-prime \\
-H 'content-type: application/json' \\
-H 'x-api-key: YOUR_PARTNER_KEY' \\
-d '{
    "partner_key": "YOUR_PARTNER_KEY",
    "prime": "${result.prime}",
    "amount": "1",
    "merchant_id": "YOUR_MERCHANT",
    "details": "Some item",
    "cardholder": {
        "phone_number": "+886923456789",
        "name": "ç‹å°æ˜",
        "email": "LittleMing@Wang.com",
        "zip_code": "100",
        "address": "å°åŒ—å¸‚å¤©é¾å€èŠéº»è¡—1è™Ÿ1æ¨“",
        "national_id": "A123456789"
    }
}'`

                $("#curl").html(command)
                }
        
            </script>
        </body>
        
        </html>